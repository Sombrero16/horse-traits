<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horse Traits & Commander Skills</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        .table-container {
            /* Tier list content should not be cut off */
        }
        th, td {
            padding: 1rem;
            text-align: left;
        }
        th {
            background-color: #2d3748;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        tr:nth-child(even) {
            background-color: #2d3748;
        }
        .search-input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #4a5568;
            color: #e2e8f0;
            border: none;
        }
        .search-input::placeholder {
            color: #a0aec0;
        }
        .tier-card {
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .tier-card h2 {
            font-weight: 700;
            font-size: 1.25rem;
            border-bottom: 2px solid #4a5568;
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
        }
        /* Tier Colors */
        .tier-Splus { background-color: #dc2626; } /* red */
        .tier-S { background-color: #eab308; } /* yellow/orange to match marshal */
        .tier-A { background-color: #a855f7; } /* purple */
        .tier-B { background-color: #60a5fa; } /* blue */
        .tier-C { background-color: #22c55e; } /* green */
        .tier-D { background-color: #d1d5db; color: #1f2937; } /* lighter toned gray */
        .tier-E { background-color: #e5e7eb; color: #1f2937; } /* white/light gray */
        .tier-F { background-color: #ffffff; } /* white */
        .tier-F li { color: #2c2c1a; } /* dark brown/black */

        /* March Type Colors */
        .march-warrior { background-color: #dc2626; } /* red */
        .march-marshal { background-color: #eab308; } /* yellow */
        .march-tactician { background-color: #3b82f6; } /* blue */
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 text-white">Horse Traits</h1>
            <p class="text-gray-400 mt-2 text-lg italic">Priorities will differ depending on your use cases (rallies-open field)</p>
        </header>

        <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8">
            <input type="text" id="searchInput" class="search-input" placeholder="Search for Tiers, Commanders, or Skills...">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-[auto,1fr] gap-8">
            <!-- Left Column: Tier List -->
            <div class="md:col-span-1">
                <h2 class="text-2xl font-bold mb-4 text-white">Tier List</h2>
                <div id="tierListContainer">
                    <!-- Tier cards will be injected here by JavaScript -->
                </div>
            </div>

            <!-- Right Column: March Type Tables -->
            <div class="md:col-span-1">
                <h2 class="text-2xl font-bold mb-4 text-white">March Types</h2>
                <div id="marchTablesContainer" class="space-y-8">
                    <!-- Tables for each march type will be injected here by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const csvData = `Tier,Item,,Class,Commander,Skill 1,Skill 2,Skill 3,Skill 4,Skill 5
S+,Army Sunder,,Warrior Cavalry,LÃ¼ Bu,Gallant,Army Sunder,Dustbane,Renewal,
S+,Bedrock,,Warrior Cavalry,Timur,Bedrock,Lifesaver,Fearless,Peacemaker,
S,Overpower,,Warrior Cavalry,Attila,Bedrock,Fearless,Blade Sever,Peacemaker,
S,Gallant,,Warrior Cavalry,Guan Yu,Gallant,Thunderbolt,Fearless,Bedrock,
S,Valor,,Warrior Cavalry,Rani,Bedrock,Fearless,Blade Sever,Peacemaker,
S,Phalanx Breaker,,Warrior Archer,Mulan,Bedrock,Gallant,Army Sunder,Dustbane,Renewal
S,Spiritbond,,Warrior Archer,Mehmed,Lifesaver,Fearless,Fearless,Dustbane,
S,Strategem,,Warrior Archer,Bellevue,Gallant,Army Sunder,Dustbane,,
A,Lifesaver,,Warrior Pikemen,Cyrus,Valor,Lifesaver,Army Sunder,Dustbane,Bedrock
A,Dustbane,,Warrior Pikemen,Barbarossa,Lifesaver,Fearless,Bedrock,Dustbane,Peacemaker
A,Fearless,,Warrior Pikemen,Mansa Musa,Lifesaver,Fearless,Fearless,Bedrock,Valor
B,Renewal,,Warrior Pikemen,Boudica,Valor,Army Sunder,Dustbane,,
B,Iron Ridge,,Warrior Pikemen,Leonidas,Valor,Army Sunder,Dustbane,,
B,Tactician,,Warrior Pikemen,Richard,Valor,Army Sunder,Dustbane,,
,,,Warrior Swords,Miyamoto,Overpower,Army Sunder,Dustbane,Fearless,
,,,Warrior Swords,Tribhuwana,Bedrock,Lifesaver,Fearless,,
,,,Warrior Swords,Lagertha,Overpower,Army Sunder,Dustbane,,
,,,Warrior Swords,Yodit,Overpower,Army Sunder,Dustbane,,
,,,Warrior Swords,Hammurabi,Fearless,Bedrock,Overpower,,
,,,Marshal Pikemen,Julius Caesar,Army Sunder,Phalanx Breaker,Bastion,Renewal,
,,,Marshal Pikemen,Ram Kham,Bedrock,Lifesaver,Bastion,Renewal,
,,,Marshal Pikemen,Octavian,Phalanx Breaker,Tidebreaker,Army Sunder,Bastion,
,,,Marshal Pikemen,Bushra,Bedrock,Lifesaver,Renewal,Bastion,
D,Fierce,,Marshal Cavalry,El Cid,Gallant,Dustbane,Army Sunder,,
D,Healing Armour,,Marshal Cavalry,Saladin,Fearless,Bedrock,Gallant,,
D,Stalwart,,Marshal Cavalry,Tomyris,Bedrock,Renewal,Fearless,Lifesaver,
D,Entrenchment,,Marshal Cavalry,Sejong,Lifesaver,Fearless,Renewal,Bedrock,
F,Cunning,,Marshal Cavalry,Tariq,Gallant,Dustbane,Army Sunder,,
F,Battlemaster,,Marshal Cavalry,YSG,Overpower,Army Sunder,Dustbane,,
,,,Tactician Pikemen,Elizabeth,Lifesaver,Fearless,Bedrock,Renewal,
,,,Tactician Pikemen,Belisarius,Strategem,Army Sunder,Dustbane,Fearless,
,,,Tactician Pikemen,Ashoka,Bedrock,Fearless,Gallant,,
,,,Tactician Cavalry,Hannibal,Iron Ridge,Army Sunder,Dustbane,Strategem,
,,,Tactician Cavalry,Justinian,Lifesaver,Bedrock,Fearless,Renewal,
,,,Tactician Cavalry,Cleopatra,Bedrock,Fearless,Strategem,,
,,,Tactician Cavalry,Ashoka,Bedrock,Fearless,Gallant,,
,,,Tactician Swords & Archers,Ramesses,Spiritbond,Fearless,Iron Ridge,,
,,,Tactician Swords & Archers,Charlemagne,Bedrock,Fearless,Spiritbond,Blade Sever,
,,,Tactician Swords & Archers,Theodora,Bedrock,Fearless,Spiritbond,Blade Sever,
,,,Tactician Swords & Archers,Suleiman,Spiritbond,Army Sunder,Dustbane,,
,,,Tactician Swords & Archers,Sun Tzu,Spiritbond,Army Sunder,Dustbane,,
,,,Tactician Swords & Archers,YSS,Spiritbond,Army Sunder,Dustbane,Fearless,
,,,Tactician Swords & Archers,Phillip,Spiritbond,Army Sunder,Dustbane,Fearless,
,,,Tactician Swords & Archers,Seondeok,Spiritbond,
B,Tactician,,,,,,,,,
B,Tidebreaker,,,,,,,,,
B,Bastion,,,,,,,,,
C,Peacemaker,,,,,,,,,
C,Blade Sever,,,,,,,,,
C,Siege,,,,,,,,,
C,Swift,,,,,,,,,
C,Abundance,,,,,,,,,
C,Full Stores,,,,,,,,,
D,Perseverance,,,,,,,,,
D,Thunderbolt,,,,,,,,,`;

        let data = [];
        const tierColors = {
            'S+': 'tier-Splus',
            'S': 'tier-S',
            'A': 'tier-A',
            'B': 'tier-B',
            'C': 'tier-C',
            'D': 'tier-D',
            'E': 'tier-E',
            'F': 'tier-F',
        };

        const marchColors = {
            'Warrior': 'march-warrior',
            'Marshal': 'march-marshal',
            'Tactician': 'march-tactician',
        };

        function parseCSV(csv) {
            const rows = csv.trim().split('\n');
            const headers = rows[0].split(',').map(header => header.trim()).filter(Boolean);
            const dataRows = rows.slice(1);
            
            return dataRows.map(row => {
                const values = row.split(',').map(v => v.trim());
                let rowData = {};
                const cleanedValues = [values[0], values[1], values[3], values[4], values[5], values[6], values[7], values[8], values[9]].filter(v => v !== undefined);
                
                headers.forEach((header, index) => {
                    rowData[header] = cleanedValues[index] || '';
                });
                return rowData;
            });
        }

        function renderAll(dataToRender) {
            renderTierList(dataToRender);
            renderMarchTables(dataToRender);
        }

        function renderTierList(dataToRender) {
            const container = document.getElementById('tierListContainer');
            container.innerHTML = '';
            
            const tiers = {};
            dataToRender.forEach(row => {
                const tier = row['Tier'];
                if (tier) {
                    if (!tiers[tier]) {
                        tiers[tier] = [];
                    }
                    tiers[tier].push(row);
                }
            });

            const tierOrder = ['S+', 'S', 'A', 'B', 'C', 'D', 'E', 'F'];

            tierOrder.forEach(tier => {
                if (tiers[tier] && tiers[tier].length > 0) {
                    const card = document.createElement('div');
                    card.className = `tier-card ${tierColors[tier] || 'bg-gray-800'}`;
                    
                    const heading = document.createElement('h2');
                    heading.textContent = `Tier ${tier}`;
                    card.appendChild(heading);

                    const list = document.createElement('ul');
                    list.className = 'list-disc list-inside space-y-1 text-gray-100';
                    
                    tiers[tier].forEach(item => {
                        const listItem = document.createElement('li');
                        // No hero names in the tier list
                        listItem.textContent = item['Item'];
                        list.appendChild(listItem);
                    });
                    
                    card.appendChild(list);
                    container.appendChild(card);
                }
            });
        }

        function renderMarchTables(dataToRender) {
            const container = document.getElementById('marchTablesContainer');
            container.innerHTML = '';

            const classes = {};
            dataToRender.forEach(row => {
                const className = row['Class'];
                if (className) {
                    if (!classes[className]) {
                        classes[className] = [];
                    }
                    classes[className].push(row);
                }
            });

            const tableHeaders = ['Commander', 'Skill 1', 'Skill 2', 'Skill 3', 'Skill 4', 'Skill 5'];

            for (const className in classes) {
                const marchData = classes[className];

                const section = document.createElement('div');
                section.className = 'p-6 rounded-xl shadow-lg border border-gray-700';
                
                const heading = document.createElement('h3');
                const baseType = className.split(' ')[0]; // Get the first word (Warrior, Marshal, Tactician)
                heading.className = `text-xl font-semibold mb-4 text-white p-2 rounded-md ${marchColors[baseType] || 'bg-gray-700'}`;
                heading.textContent = className;
                section.appendChild(heading);
                
                const table = document.createElement('table');
                table.className = 'min-w-full divide-y divide-gray-700';
                
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                tableHeaders.forEach(headerText => {
                    const th = document.createElement('th');
                    th.textContent = headerText;
                    th.className = 'px-4 py-2 text-gray-300 font-medium tracking-wider';
                    headerRow.appendChild(th);
                });
                thead.appendChild(headerRow);
                table.appendChild(thead);
                
                const tbody = document.createElement('tbody');
                tbody.className = 'divide-y divide-gray-700';
                
                marchData.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.className = 'hover:bg-gray-700 transition-colors duration-200';
                    
                    tableHeaders.forEach(header => {
                        const td = document.createElement('td');
                        td.textContent = row[header];
                        td.className = 'px-4 py-2';
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                });
                
                table.appendChild(tbody);
                section.appendChild(table);
                container.appendChild(section);
            }
        }

        function handleSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            const filteredData = data.filter(row => {
                return Object.values(row).some(value => 
                    String(value).toLowerCase().includes(searchTerm)
                );
            });
            renderTierList(data); // Always render tier list from full data
            renderMarchTables(filteredData); // Filter only the march tables
        }

        document.addEventListener('DOMContentLoaded', () => {
            data = parseCSV(csvData);
            renderAll(data);
            document.getElementById('searchInput').addEventListener('input', handleSearch);
        });
    </script>
</body>
</html>

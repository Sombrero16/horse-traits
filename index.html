<!DOCTYPE ahtml>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horse Traits Overview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        .table-container {
            /* Tier list content should not be cut off */
        }
        th, td {
            padding: 1rem;
            text-align: left;
        }
        th {
            background-color: #2d3748;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        tr:nth-child(even) {
            background-color: #2d3748;
        }
        .search-input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 0.5rem;
            background-color: #4a5568;
            color: #e2e8f0;
            border: none;
        }
        .search-input::placeholder {
            color: #a0aec0;
        }
        .tier-card {
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: #2d3748; /* Neutral background for the card body */
        }
        .tier-header {
            font-weight: 700;
            font-size: 1.25rem;
            padding: 0.5rem 1rem;
            margin: -1rem -1rem 1rem -1rem; /* Adjust for padding of the parent */
            border-radius: 0.5rem 0.5rem 0 0;
        }
        /* Tier Colors */
        .tier-Splus { background-color: #dc2626; } /* red */
        .tier-S { background-color: #eab308; } /* yellow/orange to match marshal */
        .tier-A { background-color: #a855f7; } /* purple */
        .tier-B { background-color: #60a5fa; } /* blue */
        .tier-C { background-color: #22c55e; } /* green */
        .tier-D { background-color: #d1d5db; color: #1f2937; } /* lighter toned gray */
        .tier-E { background-color: #e5e7eb; color: #1f2937; } /* white/light gray */
        .tier-F { background-color: #ffffff; color: #1f2937; } /* white header with dark text */

        /* March Type Colors */
        .march-warrior { background-color: #dc2626; } /* red */
        .march-marshal { background-color: #eab308; } /* yellow */
        .march-tactician { background-color: #3b82f6; } /* blue */
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="mb-8 flex flex-col md:flex-row items-center justify-center gap-4">
            <!-- Left Image -->
            <div class="flex justify-center mt-4 md:mt-0">
                <img src="https://github.com/Sombrero16/horse-traits/blob/main/assets/pictures/image02.jpg?raw=true" alt="Decorative horse head illustration on the left" class="w-full max-w-[220px] rounded-lg border border-gray-600" />
            </div>
            <!-- Header Text -->
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-2 text-white">Horse Traits</h1>
                <p class="gray-400 mt-2 text-lg italic">Priorities will differ depending on your use cases (rallies/open field)</p>
            </div>
            <!-- Right Image -->
            <div class="flex justify-center mt-4 md:mt-0">
                <img src="https://github.com/Sombrero16/horse-traits/blob/main/assets/pictures/image01.jpg?raw=true" alt="Decorative horse illustration on the right" class="w-full max-w-[280px] rounded-lg border border-gray-600" />
            </div>
        </header>

        <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8">
            <input type="text" id="searchInput" class="search-input" placeholder="Search for Traits or Commanders...">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-[auto,1fr] gap-8">
            <!-- Left Column: Tier List -->
            <div class="md:col-span-1">
                <h2 class="text-2xl font-bold mb-4 text-white">Tier List</h2>
                <div id="tierListContainer">
                    <!-- Tier cards will be injected here by JavaScript -->
                </div>
            </div>

            <!-- Right Column: March Type Tables -->
            <div class="md:col-span-1">
                <h2 class="text-2xl font-bold mb-4 text-white">March Types</h2>
                <div id="marchTablesContainer" class="space-y-8">
                    <!-- Tables for each march type will be injected here by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="flex justify-center mt-8">
        <img src="https://github.com/Sombrero16/horse-traits/blob/main/assets/pictures/image03.jpg?raw=true" alt="Additional horse illustration" class="w-full max-w-3xl rounded-lg border border-gray-600" />
    </div>

    <script>
        const csvData = `Tier,Item,,Class,Commander,Skill 1,Skill 2,Skill 3,Skill 4,Skill 5
S+,Army Sunder,,Warrior Cavalry,LÃ¼ Bu,Gallant,Army Sunder,Dustbane,,
S+,Bedrock,,Warrior Cavalry,Timur,Bedrock,Lifesaver,Fearless,Renewal,
S,Overpower,,Warrior Cavalry,Attila,Bedrock,Fearless,Blade Sever,Peacemaker,
S,Gallant,,Warrior Cavalry,Guan Yu,Gallant,,Fearless,Bedrock,
S,Valor,,Warrior Cavalry,Rani,Bedrock,Fearless,Blade Sever,Peacemaker,
S,Phalanx Breaker,,Warrior Archer,Mulan,Gallant,Army Sunder,Dustbane,,
S,Spiritbond,,Warrior Archer,Mehmed,Lifesaver,Fearless,Fearless,Dustbane,Bedrock
S,Strategem,,Warrior Archer,Bellevue,Gallant,Army Sunder,Dustbane,,
A,Lifesaver,,Warrior Pikemen,Cyrus,Valor,Army Sunder,Dustbane,,
A,Fearless,,Warrior Pikemen,Mansa Musa,Lifesaver,Fearless,Bedrock,Valor,
B,Renewal,,Warrior Pikemen,Boudica,Valor,Army Sunder,Dustbane,,
A,Dustbane,,Warrior Pikemen,Barbarossa,Fearless,Bedrock,Dustbane,Peacemaker,
B,Iron Ridge,,Warrior Pikemen,Leonidas,Valor,Army Sunder,Dustbane,,
B,Tactician,,Warrior Pikemen,Richard,Valor,Army Sunder,Dustbane,,
,,,Warrior Pikemen,Joan,Lifesaver,Bedrock,Fearless,Valor,
,,,Warrior Swordsmen,Miyamoto,Overpower,Army Sunder,Dustbane,,
,,,Warrior Swordsmen,Tribhuwana,Bedrock,Lifesaver,Fearless,,
,,,Warrior Swordsmen,Lagertha,Overpower,Army Sunder,Dustbane,,
,,,Warrior Swordsmen,Yodit,Overpower,Army Sunder,Dustbane,,
,,,Warrior Swordsmen,Hammurabi,Fearless,Bedrock,Overpower,,
,,,Marshal Pikemen,Julius Caesar,Army Sunder,Phalanx Breaker,Bastion,Renewal,
,,,Marshal Pikemen,Ram Kham,Bedrock,Bastion,Renewal,,
,,,Marshal Pikemen,Octavian,Phalanx Breaker,Tidebreaker,Army Sunder,Bastion,
,,,Marshal Pikemen,Bushra,Bedrock,Renewal,Bastion,,
D,Fierce,,Marshal Cavalry,El Cid,Gallant,Dustbane,Army Sunder,,
D,Healing Armour,,Marshal Cavalry,Saladin,Fearless,Bedrock,Gallant,,
D,Stalwart,,Marshal Cavalry,Tomyris,Bedrock,Renewal,Fearless,,
D,Entrenchment,,Marshal Cavalry,Sejong,Fearless,Renewal,Bedrock,,
F,Cunning,,Marshal Cavalry,Tariq,Gallant,Dustbane,Army Sunder,,
F,Battlemaster,,Marshal Cavalry,YSG,Overpower,Army Sunder,Dustbane,,
,,,Tactician Pikemen,Elizabeth,Lifesaver,Fearless,Bedrock,,
,,,Tactician Pikemen,Belisarius,Strategem,Army Sunder,Dustbane,,
,,,Tactician Pikemen,Ashoka,Bedrock,Fearless,Gallant,,
,,,Tactician Cavalry,Hannibal,Army Sunder,Dustbane,Strategem,,
,,,Tactician Cavalry,Justinian,Bedrock,Fearless,Renewal,,
,,,Tactician Cavalry,Ashoka,Bedrock,Fearless,Gallant,,
,,,Tactician Cavalry,Cleopatra,Bedrock,Fearless,Strategem,,
,,,Tactician Swordsmen & Archers,Ramesses,Spiritbond,Fearless,Iron Ridge,,
,,,Tactician Swordsmen & Archers,Charlemagne,Bedrock,Fearless,Spiritbond,Blade Sever,
,,,Tactician Swordsmen & Archers,Theodora,Bedrock,Fearless,Spiritbond,Blade Sever,
,,,Tactician Swordsmen & Archers,Suleiman,Spiritbond,Army Sunder,Dustbane,,
,,,Tactician Swordsmen & Archers,Sun Tzu,Spiritbond,Army Sunder,Dustbane,,
,,,Tactician Swordsmen & Archers,YSS,Spiritbond,Army Sunder,Dustbane,Fearless,
,,,Tactician Swordsmen & Archers,Phillip,Spiritbond,Army Sunder,Dustbane,Fearless,
,,,Tactician Swordsmen & Archers,Seondeok,Spiritbond,Army Sunder,Dustbane,Fearless,
B,Tidebreaker,,,,,,,,,
B,Bastion,,,,,,,,,
C,Peacemaker,,,,,,,,,
C,Blade Sever,,,,,,,,,
C,Siege,,,,,,,,,
C,Swift,,,,,,,,,
C,Abundance,,,,,,,,,
C,Full Stores,,,,,,,,,
D,Perseverance,,,,,,,,,
D,Thunderbolt,,,,,,,,,`;

        let data = [];
        const tierColors = {
            'S+': 'tier-Splus',
            'S': 'tier-S',
            'A': 'tier-A',
            'B': 'tier-B',
            'C': 'tier-C',
            'D': 'tier-D',
            'E': 'tier-E',
            'F': 'tier-F',
        };

        const marchColors = {
            'Warrior': 'march-warrior',
            'Marshal': 'march-marshal',
            'Tactician': 'march-tactician',
        };

        function parseCSV(csv) {
            const rows = csv.trim().split('\n').slice(1);
            
            return rows.map(row => {
                const values = row.split(',').map(v => v.trim());
                let rowData = {};
                rowData['Tier'] = values[0];
                rowData['Item'] = values[1];
                rowData['Class'] = values[3];
                rowData['Commander'] = values[4];
                const skills = [values[5], values[6], values[7], values[8], values[9]].filter(Boolean);
                rowData['Traits'] = skills.join(' | ');
                return rowData;
            });
        }

        function renderAll(dataToRender) {
            renderTierList(dataToRender);
            renderMarchTables(dataToRender);
        }

        function renderTierList(dataToRender) {
            const container = document.getElementById('tierListContainer');
            container.innerHTML = '';
            
            const tiers = {};
            dataToRender.forEach(row => {
                const tier = row['Tier'];
                const item = row['Item'];
                if (tier && item) {
                    if (!tiers[tier]) {
                        tiers[tier] = [];
                    }
                    tiers[tier].push(item);
                }
            });

            const tierOrder = ['S+', 'S', 'A', 'B', 'C', 'D', 'E', 'F'];

            tierOrder.forEach(tier => {
                if (tiers[tier] && tiers[tier].length > 0) {
                    const card = document.createElement('div');
                    card.className = `tier-card`;
                    
                    const heading = document.createElement('h2');
                    heading.textContent = `Tier ${tier}`;
                    heading.className = `tier-header ${tierColors[tier] || ''}`;
                    card.appendChild(heading);

                    const list = document.createElement('ul');
                    list.className = 'list-disc list-inside space-y-1 text-gray-100';
                    
                    tiers[tier].forEach(item => {
                        const listItem = document.createElement('li');
                        // No hero names in the tier list
                        listItem.textContent = item;
                        list.appendChild(listItem);
                    });
                    
                    card.appendChild(list);
                    container.appendChild(card);
                }
            });
        }

        function renderMarchTables(dataToRender) {
            const container = document.getElementById('marchTablesContainer');
            container.innerHTML = '';

            const classes = {};
            dataToRender.forEach(row => {
                let className = row['Class'];
                if (className) {
                    // Normalize the data name for display
                    if (className === 'Warrior Archer') {
                        className = 'Warrior Archers';
                    }
                    if (!classes[className]) {
                        classes[className] = [];
                    }
                    classes[className].push(row);
                }
            });

            const classOrder = [
              'Warrior Cavalry', 'Warrior Pikemen', 'Warrior Swordsmen', 'Warrior Archers', 
              'Marshal Pikemen', 'Marshal Cavalry', 
              'Tactician Pikemen', 'Tactician Cavalry', 'Tactician Swordsmen & Archers'
            ];

            classOrder.forEach(className => {
                const marchData = classes[className];
                if (marchData && marchData.length > 0) {
                    const section = document.createElement('div');
                    section.className = 'p-6 rounded-xl shadow-lg border border-gray-700';
                    
                    const heading = document.createElement('h3');
                    const baseType = className.split(' ')[0];
                    heading.className = `text-xl font-semibold mb-4 text-white p-2 rounded-md ${marchColors[baseType] || 'bg-gray-700'}`;
                    heading.textContent = className;
                    section.appendChild(heading);
                    
                    const tableWrapper = document.createElement('div');
                    tableWrapper.className = 'overflow-x-auto';
                    
                    const table = document.createElement('table');
                    table.className = 'min-w-full divide-y divide-gray-700';
                    
                    const thead = document.createElement('thead');
                    const headerRow = document.createElement('tr');
                    
                    // Commander Header
                    const commanderTh = document.createElement('th');
                    commanderTh.textContent = 'Commander';
                    commanderTh.className = 'px-4 py-2 text-gray-300 font-medium tracking-wider border-r border-gray-600';
                    headerRow.appendChild(commanderTh);

                    // Traits Header
                    const traitsTh = document.createElement('th');
                    traitsTh.textContent = 'Traits';
                    traitsTh.className = 'px-4 py-2 text-gray-300 font-medium tracking-wider';
                    headerRow.appendChild(traitsTh);

                    thead.appendChild(headerRow);
                    table.appendChild(thead);
                    
                    const tbody = document.createElement('tbody');
                    tbody.className = 'divide-y divide-gray-700';
                    
                    marchData.forEach(row => {
                        const tr = document.createElement('tr');
                        tr.className = 'hover:bg-gray-700 transition-colors duration-200';
                        
                        // Commander cell
                        const commanderTd = document.createElement('td');
                        commanderTd.textContent = row['Commander'];
                        commanderTd.className = 'px-4 py-2 border-r border-gray-600';
                        tr.appendChild(commanderTd);

                        // Traits cell
                        const traitsTd = document.createElement('td');
                        traitsTd.textContent = row['Traits'];
                        traitsTd.className = 'px-4 py-2';
                        tr.appendChild(traitsTd);

                        tbody.appendChild(tr);
                    });
                    
                    table.appendChild(tbody);
                    tableWrapper.appendChild(table);
                    section.appendChild(tableWrapper);
                    container.appendChild(section);
                }
            });
        }

        function handleSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            
            // Filter for traits that match the search term
            const filteredTraits = data.filter(row => {
                const item = row['Item'];
                return row['Tier'] && item && item.toLowerCase().includes(searchTerm);
            });

            // Filter for commanders that match the search term or have traits that match
            const filteredCommanders = data.filter(row => {
                const commander = row['Commander'];
                const traits = row['Traits'];
                if (commander) { // Only check rows that have a commander
                    return commander.toLowerCase().includes(searchTerm) || traits.toLowerCase().includes(searchTerm);
                }
                return false;
            });

            renderTierList(filteredTraits);
            renderMarchTables(filteredCommanders);
        }

        document.addEventListener('DOMContentLoaded', () => {
            data = parseCSV(csvData);
            renderAll(data);
            document.getElementById('searchInput').addEventListener('input', handleSearch);
        });
    </script>
</body>
</html>
